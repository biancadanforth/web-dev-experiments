<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="IE=edge">
    <title>What do different URLs refer to from the webRequest WebExtension API</title>
    <meta name="description" content="The webRequest.onResponseStarted event returns a response object with HTTP request details, including a key for documentUrl, targetUrl and originUrl. The purpose of this experiment is to find out what each means in a lot of different scenarios.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <h1>Motivation</h1>
    <p>The webRequest.onResponseStarted event returns a response object with HTTP request details, including a key for documentUrl, targetUrl and originUrl. The purpose of this experiment is to find out what each means in a lot of different scenarios..</p>
    <h2>Instructions</h2>
    <p>To see the results for the experiments on this page, open the browser console (Ctrl/Cmd + Shift + J) and filter results for 'capture'. Scenarios 1-4 are readily viewable in the console upon running the web extension (I use the <a href="https://github.com/mozilla/web-ext">web-ext</a> CLI). For Scenario 5 results, load <a href="https://biancadanforth.github.io/web-request-test/">this page</a> and view the console.</p>
    <h2>Important</h2>
    <p>These requests represent only what is *captured* by the current capture code for <a href="https://github.com/mozilla/lightbeam-we">Lightbeam</a>. See <a href="https://github.com/biancadanforth/web-dev-experiments/grok-web-request-urls/">this repo's</a> <code>capture.js</code> file for that.</p>
    <hr>
    <section>
      <h2>Scenario 1: an <code>iframe</code> pointing to a different webpage</h2>
      <h3>Open <a href="https://biancadanforth.github.io/web-request-test/scenario-1.html" target="_blank">Scenario 1</a></h3>
    </section>
    <section>
      <h2>Scenario 2: an <code>iframe</code> loads a script</h2>
      <h3>Open <a href="https://biancadanforth.github.io/web-request-test/scenario-2.html" target="_blank">Scenario 2</a></h3>
    </section>
    <section>
      <h2>Scenario 3: an <code>iframe</code> loads an image</h2>
      <h3>Open <a href="https://biancadanforth.github.io/web-request-test/scenario-3.html" target="_blank">Scenario 3</a></h3>
    </section>
    <section>
      <h2>Scenario 4: A chain of <code>iframe</code>s, each loading a separate and distinct third party resource (an HTML document in this case).</h2>
      <h3>Open <a href="http://biancadanforth.com/web-request-test/scenario-4.html" target="_blank">Scenario 4</a></h3>
    </section>
    <section>
      <h2>Scenario 5: A service worker is used.</h2>
      <h3>Open <a href="https://biancadanforth.github.io/web-request-test/scenario-5.html" target="_blank">Scenario 5</a></h3>
    </section>
    <script src="app.js"></script>
  </body>
</html>
